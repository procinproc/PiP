<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Process-in-Process: pip_init</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="PiP-doxygen.jpeg"/></td>
  <td id="projectalign">
   <div id="projectname">Process-in-Process<span id="projectnumber">&#160;2.4.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__pip__init.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">pip_init<div class="ingroups"><a class="el" href="group__PiP-API0-init-fin.html">API: Initialization/Finalization</a></div></div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gadf72c68d9ac794ab6153bfc7bf6b8490"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pip__init.html#gadf72c68d9ac794ab6153bfc7bf6b8490">pip_init</a> (int *pipidp, int *ntasksp, void **root_expp, int opts)</td></tr>
<tr class="separator:gadf72c68d9ac794ab6153bfc7bf6b8490"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="gadf72c68d9ac794ab6153bfc7bf6b8490" name="gadf72c68d9ac794ab6153bfc7bf6b8490"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadf72c68d9ac794ab6153bfc7bf6b8490">&#9670;&nbsp;</a></span>pip_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pip_init </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>pipidp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>ntasksp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>root_expp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>opts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section user"><dt>Description</dt><dd>This function initializes the PiP library. The PiP root process must call this. A PiP task is not required to call this function unless the PiP task calls any PiP functions.<br  />
<br  />
When this function is called by a PiP root, <code>ntasksp</code>, and <code>root_expp</code> are input parameters. If this is called by a PiP task, then those parameters are output <br  />
 returning the same values input by the root.<br  />
<br  />
A PiP task may or may not call this function. <code>pip_init</code> is called implicitly even if the PiP task program is NOT explicitly linked with the PiP library.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">pipidp</td><td>When this is called by the PiP root process, then this returns <code>PIP_PIPID_ROOT</code>, otherwise it returns the PiP ID of the calling PiP task. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ntasksp</td><td>When called by the PiP root, it specifies the maximum number of PiP tasks. When called by a PiP task, then the number specified by the PiP root is returned. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">root_expp</td><td>If the root PiP is ready to export a memory region to any PiP task(s), then this parameter is to pass the exporting address. If the PiP root is not ready to export or has nothing to export then this variable can be NULL. When called by a PiP task, it returns the exported address by the PiP root, if any. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">opts</td><td>Specifying the PiP execution mode and See below.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Execution mode option</dt><dd>Users may explicitly specify the PiP execution mode. This execution mode can be categorized in two; process mode and thread mode. In the process execution mode, each PiP task may have its own file descriptors, signal handlers, and so on, just like a process. Contrastingly, in the pthread executionn mode, file descriptors and signal handlers are shared among PiP root and PiP tasks while maintaining the privatized variables. <br  />
To spawn a PiP task in the process mode, the PiP library modifies the <b>clone()</b> flag so that the created PiP task can exhibit the alomost same way with that of normal Linux process. One of the option flag values or any combination of; <b>PIP_MODE_PTHREAD</b> and <b>PIP_MODE_PROCESS</b>, can be specified as the option flag. Or, users may specify the execution mode by the <b>PIP_MODE</b> environment described below.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Zero is returned if this function succeeds. Otherwise an error number is returned.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">EINVAL</td><td><em>*ntasksp</em> is negative </td></tr>
    <tr><td class="paramname">EBUSY</td><td>PiP root called this function twice or more without calling <a class="el" href="group__pip__fin.html">pip_fin</a>. </td></tr>
    <tr><td class="paramname">EPERM</td><td><em>opts</em> is invalid or unacceptable </td></tr>
    <tr><td class="paramname">EOVERFLOW</td><td><em>*ntasksp</em> is too large </td></tr>
    <tr><td class="paramname">ELIBSCN</td><td>verssion miss-match between PiP root and PiP task</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Environment</dt><dd><ul>
<li><b>PIP_MODE</b> Specifying the PiP execution mmode. Its value can be either <code>thread</code>, <code>pthread</code>, or <code>process</code>. </li>
<li><b>PIP_STACKSZ</b> Sepcifying the stack size (in bytes). The <b>KMP_STACKSIZE</b> and <b>OMP_STACKSIZE</b> are also effective. The 't', 'g', 'm', 'k' and 'b' posfix character can be used, as abbreviations of Tera, Giga, Mega, Kilo and Byte, respectively. </li>
<li><b>PIP_STOP_ON_START</b> Specifying the PIP ID to stop on start to debug the specified PiP task from the beginning. If the before hook is specified, then the PiP task will be stopped just before calling the before hook. </li>
<li><b>PIP_GDB_PATH</b> If thisenvironment is set to the path pointing to the PiP-gdb executable file, then PiP-gdb is automatically attached when an excetion signal (SIGSEGV and SIGHUP by default) is delivered. The signals which triggers the PiP-gdb invokation can be specified the <code>PIP_GDB_SIGNALS</code> environment described below. </li>
<li><b>PIP_GDB_COMMAND</b> If this PIP_GDB_COMMAND is set to a filename containing some GDB commands, then those GDB commands will be executed by the GDB in batch mode, instead of backtrace. </li>
<li><b>PIP_GDB_SIGNALS</b> Specifying the signal(s) resulting automatic PiP-gdb attach. Signal names (case insensitive) can be concatenated by the '+' or '-' symbol. 'all' is reserved to specify most of the signals. For example, 'ALL-TERM' means all signals excepting <code>SIGTERM</code>, another example, 'PIPE+INT' means <code>SIGPIPE</code> and <code>SIGINT</code>. Some signals such as SIGKILL and SIGCONT cannot be specified. These PIP_GDB related settings are only valid with the process mode. </li>
<li><b>PIP_SHOW_MAPS</b> If the value is 'on' and one of the above exection signals is delivered, then the memory map will be shown. </li>
<li><b>PIP_SHOW_PIPS</b> If the value is 'on' and one of the above exection signals is delivered, then the process status by using the <code>pips</code> command will be shown.</li>
</ul>
</dd></dl>
<dl class="section user"><dt>Bugs</dt><dd>Is is NOT guaranteed that users can spawn tasks up to the number specified by the <em>ntasksp</em> argument. There are some limitations come from outside of the PiP library (from GLIBC).</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__pip__named__export.html#ga3613eaa34ad5a4985007ff9177eb6542">pip_named_export</a> </dd>
<dd>
<a class="el" href="group__pip__export.html#ga76ef9337bec7dd836168f22247d4c64c">pip_export</a> </dd>
<dd>
<a class="el" href="group__pip__fin.html#gac4654282785abb9434ce81573fdf16ed">pip_fin</a> </dd>
<dd>
pip-mode </dd>
<dd>
<a class="el" href="group__pips.html" title="list or kill running PiP tasks">pips</a></dd></dl>
<dl class="section author"><dt>Author</dt><dd>Atsushi Hori </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
